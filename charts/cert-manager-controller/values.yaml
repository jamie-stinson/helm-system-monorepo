workload:
  enabled: true
  image:
    registry: "quay.io"
    repository: "jetstack/cert-manager-controller"
    tag: "v1.16.2"
  args:
    - '--v=2'
    - '--cluster-resource-namespace=$(POD_NAMESPACE)'
    - '--leader-election-namespace=$(POD_NAMESPACE)'
    - '--acme-http01-solver-image=quay.io/jetstack/cert-manager-acmesolver:v1.16.2'
    - '--max-concurrent-challenges=60'
  replicaCount: 2
  resources:
    requests:
      cpu: 10m
      memory: 10Mi
  affinity:
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - podAffinityTerm:
            labelSelector:
              matchLabels:
                app.kubernetes.io/name: cert-manager-controller
            topologyKey: kubernetes.io/hostname
          weight: 100
  strategy:
    type: RollingUpdate
    minAvailable: 1
    maxUnavailable: 1

pdb:
  enabled: true
  maxUnavailable: "1"

service:
  enabled: true
  type: ClusterIP
  ports:
    - name: http
      protocol: TCP
      port: 9402
    - name: health
      protocol: TCP
      port: 9403

serviceAccount:
  enabled: true
  automountServiceAccountToken: true

rbac:
  enabled: true
  type: ClusterRole
  rules:
    - apiGroups:
        - cert-manager.io
      resources:
        - clusterissuers
      verbs:
        - get
        - list
        - watch
    - apiGroups:
        - cert-manager.io
      resourceNames:
        - issuers.cert-manager.io/*
        - clusterissuers.cert-manager.io/*
      resources:
        - signers
      verbs:
        - approve
    - apiGroups:
        - cert-manager.io
      resources:
        - certificates
        - certificates/status
        - certificaterequests
        - certificaterequests/status
      verbs:
        - update
        - patch
    - apiGroups:
        - cert-manager.io
      resources:
        - certificates
        - certificaterequests
        - clusterissuers
        - issuers
      verbs:
        - get
        - list
        - watch
    - apiGroups:
        - cert-manager.io
      resources:
        - certificates/finalizers
        - certificaterequests/finalizers
      verbs:
        - update
    - apiGroups:
        - acme.cert-manager.io
      resources:
        - orders
      verbs:
        - create
        - delete
        - get
        - list
        - watch
    - apiGroups:
        - ''
      resources:
        - secrets
      verbs:
        - get
        - list
        - watch
        - create
        - update
        - delete
        - patch
    - apiGroups:
        - ''
      resources:
        - events
      verbs:
        - create
        - patch
    - apiGroups:
        - certificates.k8s.io
      resources:
        - certificatesigningrequests
      verbs:
        - get
        - list
        - watch
        - update
    - apiGroups:
        - certificates.k8s.io
      resources:
        - certificatesigningrequests/status
      verbs:
        - update
        - patch
    - apiGroups:
        - certificates.k8s.io
      resourceNames:
        - issuers.cert-manager.io/*
        - clusterissuers.cert-manager.io/*
      resources:
        - signers
      verbs:
        - sign
    - apiGroups:
        - authorization.k8s.io
      resources:
        - subjectaccessreviews
      verbs:
        - create
    - apiGroups:
        - acme.cert-manager.io
      resources:
        - challenges
        - challenges/status
      verbs:
        - update
        - patch
    - apiGroups:
        - acme.cert-manager.io
      resources:
        - challenges
      verbs:
        - get
        - list
        - watch
    - apiGroups:
        - cert-manager.io
      resources:
        - issuers
        - clusterissuers
      verbs:
        - get
        - list
        - watch
    - apiGroups:
        - ''
      resources:
        - secrets
      verbs:
        - get
        - list
        - watch
    - apiGroups:
        - ''
      resources:
        - events
      verbs:
        - create
        - patch
    - apiGroups:
        - ''
      resources:
        - pods
        - services
      verbs:
        - get
        - list
        - watch
        - create
        - delete
    - apiGroups:
        - networking.k8s.io
      resources:
        - ingresses
      verbs:
        - get
        - list
        - watch
        - create
        - delete
        - update
    - apiGroups:
        - gateway.networking.k8s.io
      resources:
        - httproutes
      verbs:
        - get
        - list
        - watch
        - create
        - delete
        - update
    - apiGroups:
        - route.openshift.io
      resources:
        - routes/custom-host
      verbs:
        - create
    - apiGroups:
        - acme.cert-manager.io
      resources:
        - challenges/finalizers
      verbs:
        - update
    - apiGroups:
        - ''
      resources:
        - secrets
      verbs:
        - get
        - list
        - watch
    - apiGroups:
        - cert-manager.io
      resources:
        - clusterissuers
        - clusterissuers/status
      verbs:
        - update
        - patch
    - apiGroups:
        - cert-manager.io
      resources:
        - clusterissuers
      verbs:
        - get
        - list
        - watch
    - apiGroups:
        - ''
      resources:
        - secrets
      verbs:
        - get
        - list
        - watch
        - create
        - update
        - delete
    - apiGroups:
        - ''
      resources:
        - events
      verbs:
        - create
        - patch
    - apiGroups:
        - cert-manager.io
      resources:
        - issuers
        - issuers/status
      verbs:
        - update
        - patch
    - apiGroups:
        - cert-manager.io
      resources:
        - issuers
      verbs:
        - get
        - list
        - watch
    - apiGroups:
        - ''
      resources:
        - secrets
      verbs:
        - get
        - list
        - watch
        - create
        - update
        - delete
    - apiGroups:
        - ''
      resources:
        - events
      verbs:
        - create
        - patch
    - apiGroups:
        - acme.cert-manager.io
      resources:
        - orders
        - orders/status
      verbs:
        - update
        - patch
    - apiGroups:
        - acme.cert-manager.io
      resources:
        - orders
        - challenges
      verbs:
        - get
        - list
        - watch
    - apiGroups:
        - cert-manager.io
      resources:
        - clusterissuers
        - issuers
      verbs:
        - get
        - list
        - watch
    - apiGroups:
        - acme.cert-manager.io
      resources:
        - challenges
      verbs:
        - create
        - delete
    - apiGroups:
        - acme.cert-manager.io
      resources:
        - orders/finalizers
      verbs:
        - update
    - apiGroups:
        - ''
      resources:
        - secrets
      verbs:
        - get
        - list
        - watch
    - apiGroups:
        - ''
      resources:
        - events
      verbs:
        - create
        - patch
    - apiGroups:
        - cert-manager.io
      resources:
        - certificates
        - certificaterequests
        - issuers
      verbs:
        - create
        - delete
        - deletecollection
        - patch
        - update
    - apiGroups:
        - cert-manager.io
      resources:
        - certificates/status
      verbs:
        - update
    - apiGroups:
        - acme.cert-manager.io
      resources:
        - challenges
        - orders
      verbs:
        - create
        - delete
        - deletecollection
        - patch
        - update
    - apiGroups:
        - cert-manager.io
      resources:
        - certificates
        - certificaterequests
        - issuers
      verbs:
        - get
        - list
        - watch
    - apiGroups:
        - acme.cert-manager.io
      resources:
        - challenges
        - orders
      verbs:
        - get
        - list
        - watch
    - apiGroups:
        - ''
      resourceNames:
        - cert-manager
      resources:
        - serviceaccounts/token
      verbs:
        - create
    - apiGroups:
        - coordination.k8s.io
      resourceNames:
        - cert-manager-controller
      resources:
        - leases
      verbs:
        - get
        - update
        - patch
    - apiGroups:
        - coordination.k8s.io
      resources:
        - leases
      verbs:
        - create

