namespace: "media"

workload:
  type: "StatefulSet"
  image:
    repository: linuxserver/emby
    tag: beta-version-4.9.0.56
  envs:
    - name: "TZ"
      value: "Europe/London"
  podSecurityContext:
    runAsUser: 0
    runAsGroup: 0
    runAsNonRoot: false
    fsGroup: 0
    fsGroupChangePolicy: "Always"
  securityContext:
    runAsUser: 0
    runAsGroup: 0
    runAsNonRoot: true
    allowPrivilegeEscalation: false
    privileged: false
    readOnlyRootFilesystem: FALSE
    seccompProfile:
      type: RuntimeDefault
    capabilities:
      drop:
        - ALL
  probes:
    readinessProbe:
      type: tcpSocket
      port: 8096
    livenessProbe:
      type: tcpSocket
      port: 8096
  storage:
    - name: emby-data
      type: pvcTemplate
      mountPath: /config
      accessModes:
        - "ReadWriteOnce"
      storageClass: "longhorn2x"
      size: "50Gi"
      readOnly: false
    - name: media-1
      type: pvc
      mountPath: /data/media1
      claimName: "media-1"
    - name: media-2
      type: pvc
      mountPath: /data/media2
      claimName: "media-2"
    - name: tmp
      type: emptyDir
      mountPath: /tmp
      ramDisk: false
      readOnly: false
    - name: run
      type: emptyDir
      mountPath: /run
      ramDisk: false
      readOnly: false

service:
  ports:
    - name: http
      port: 8096
      protocol: TCP

ingress:
  enabled: true
  annotations:
    traefik.ingress.kubernetes.io/router.entrypoints: "internalweb, internalwebsecure"
  hosts:
    - host: emby.projectwhitebox.com
      path: /
      pathType: "Prefix"
      tls:
        enabled: false
      backend:
        service:
          name: "emby"
          port: 8096

autoscaling:
  enabled: false
